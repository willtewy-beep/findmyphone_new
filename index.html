<script>
  const phone = document.getElementById("phoneInput");
  const message = document.getElementById("message");
  const loginBtn = document.getElementById("loginBtn");
  const downloadSection = document.getElementById("downloadSection");

  // ✅ Accepts +1, 1, spaces, or no prefix
  const allowedNumbers = [
    '+14165550199',
    '14165550199',
    '4165550199'
  ];

  // ✅ Normalize the number: remove non-digits, add 1 if missing
  function normalize(num) {
    return num.replace(/\D/g, '').replace(/^1?(\d{10})$/, '1$1');
  }

  function tryLogin() {
    message.textContent = "";
    const normInput = normalize(phone.value);

    // fake "verification" delay for immersion
    loginBtn.disabled = true;
    loginBtn.textContent = "Verifying...";
    setTimeout(() => {
      const normAllowed = allowedNumbers.map(n => normalize(n));

      if (normAllowed.includes(normInput)) {
        message.style.color = "#0f0";
        message.textContent = "Access granted.";
        downloadSection.style.display = "block";
      } else {
        message.style.color = "#f33";
        message.textContent = "That number isn't recognized.";
        downloadSection.style.display = "none";
      }

      loginBtn.disabled = false;
      loginBtn.textContent = "Log in";
    }, 1500);
  }

  loginBtn.addEventListener("click", tryLogin);
</script>
